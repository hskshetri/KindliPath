<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDD Assessment (0-5 Years)</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom radio button styles */
        .rating-radio {
            display: none;
        }
        .rating-label {
            display: inline-block;
            padding: 0.5rem 1rem;
            border: 2px solid #cbd5e1;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-weight: 500;
            margin: 0.25rem;
            min-width: 80px;
            text-align: center;
        }
        .rating-radio:checked + .rating-label {
            background-color: #00796b; /* Dark Teal */
            color: white;
            border-color: #00796b;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .rating-label:hover {
            border-color: #00796b;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center py-12 px-4">

    <div class="container mx-auto max-w-2xl bg-white p-8 sm:p-12 rounded-lg shadow-xl">
        
        <!-- Step 1: Age Gate -->
        <div id="age-gate">
            <h1 class="text-3xl font-bold text-gray-900 text-center">Developmental Assessment</h1>
            <p class="mt-4 text-lg text-gray-600 text-center">
                This screening tool is based on milestones from tools like the Vineland Social Maturity Scale. It is for informational purposes only and is not a substitute for a professional diagnosis.
            </p>
            <hr class="my-8">
            <h2 class="text-2xl font-semibold text-gray-800 text-center">First, please select your child's age group:</h2>
            <div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4">
                <button data-age="0-1" class="age-btn w-full text-center px-6 py-4 bg-teal-600 text-white font-medium rounded-lg shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    0 - 1 Year
                </button>
                <button data-age="1-2" class="age-btn w-full text-center px-6 py-4 bg-teal-600 text-white font-medium rounded-lg shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    1 - 2 Years
                </button>
                <button data-age="2-3" class="age-btn w-full text-center px-6 py-4 bg-teal-600 text-white font-medium rounded-lg shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    2 - 3 Years
                </button>
                <button data-age="3-4" class="age-btn w-full sm:col-start-1 sm:col-span-1 sm:col-start-auto sm:col-span-1 text-center px-6 py-4 bg-teal-600 text-white font-medium rounded-lg shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    3 - 4 Years
                </button>
                <button data-age="4-5" class="age-btn w-full text-center px-6 py-4 bg-teal-600 text-white font-medium rounded-lg shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    4 - 5 Years
                </button>
            </div>
        </div>

        <!-- Step 2: Questionnaire -->
        <div id="questionnaire" class="hidden">
            <h1 id="questionnaire-title" class="text-3xl font-bold text-gray-900 text-center">Assessment for Age 0-1</h1>
            <p class="mt-4 text-lg text-gray-600 text-center">
                Please rate your child's ability to perform the following actions.
            </p>
            <form id="assessment-form" class="mt-10 space-y-8">
                <!-- Questions will be injected here by JS -->
            </form>
            <div class="mt-10 flex justify-between items-center">
                <button id="back-btn" class="text-gray-600 font-medium hover:text-teal-700">&larr; Change Age</button>
                <button id="submit-btn" class="px-8 py-3 bg-teal-600 text-white font-medium rounded-full shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                    Get My Results
                </button>
            </div>
        </div>

        <!-- Step 3: Results -->
        <div id="results" class="hidden text-center">
            <h1 class="text-3xl font-bold text-gray-900">Your Results</h1>
            <div id="result-content" class="mt-6 p-8 bg-gray-100 rounded-lg">
                <h2 id="result-category" class="text-2xl font-bold text-teal-800"></h2>
                <p id="result-score" class="text-lg text-gray-700 mt-2"></p>
                <hr class="my-6">
                <div id="result-suggestions" class="text-left space-y-4 text-gray-700">
                    <!-- Suggestions will be injected here by JS -->
                </div>
            </div>
            <a href="#contact" id="contact-link" class="mt-8 inline-block px-10 py-4 bg-teal-600 text-white font-medium text-lg rounded-full shadow-md hover:bg-teal-700 transition-transform hover:scale-105">
                Book a Professional Consultation
            </a>
            <button id="retake-btn" class="mt-4 block w-full text-center text-gray-600 font-medium hover:text-teal-700">
                &larr; Take Assessment Again
            </button>
        </div>

    </div>

    <script>
        // --- DATA ---
        const questions = {
            "0-1": [
                { id: "q1", text: "Responds to their name being called." },
                { id: "q2", text: "Reaches for or grasps a toy you offer." },
                { id: "q3", text: "Makes cooing or babbling sounds." },
                { id: "q4", text: "Sits up with minimal or no support." },
                { id: "q5", text: "Shows curiosity or interest in faces." }
            ],
            "1-2": [
                { id: "q1", text: "Walks independently without holding on." },
                { id: "q2", text: "Says at least 3-5 clear words (e.g., 'mama', 'dada', 'ball')." },
                { id: "q3", text: "Points to objects to show you something." },
                { id: "q4", text: "Follows a simple one-step command (e.g., 'Get the ball')." },
                { id: "q5", text: "Can stack 2-3 blocks." }
            ],
            "2-3": [
                { id: "q1", text: "Speaks in short, 2-3 word sentences." },
                { id: "q2", text: "Can run and climb on small furniture." },
                { id: "q3", text: "Engages in simple pretend play (e.g., feeding a doll)." },
                { id: "q4", text: "Shows growing independence (e.g., tries to use a spoon)." },
                { id: "q5", text: "Can identify one or two body parts when asked." }
            ],
            "3-4": [
                { id: "q1", text: "Asks 'who', 'what', and 'why' questions." },
                { id: "q2", text: "Speech is mostly understood by strangers." },
                { id: "q3", text: "Plays cooperatively with other children for short periods." },
                { id: "q4", text: "Can dress/undress with some help (e.g., pull-on pants)." },
                { id: "q5", text: "Can draw a circle or cross shape." }
            ],
            "4-5": [
                { id: "q1", text: "Speaks in full, complex sentences." },
                { id: "q2", text: "Can tell a simple story about their day." },
                { id: "q3", text: "Hops or can stand on one foot for a few seconds." },
                { id: "q4", text: "Can follow 2-3 step directions (e.g., 'Get your shoes and put them by the door')." },
                { id: "q5", text: "Can correctly name 4-5 colors." }
            ]
        };

        const ratings = [
            { value: 1, text: "Not Yet" },
            { value: 2, text: "Rarely" },
            { value: 3, text: "Sometimes" },
            { value: 4, text: "Often" },
            { value: 5, text: "Consistently" }
        ];

        const resultsData = {
            "Extreme": {
                title: "Suggestion: Extreme GDD",
                details: `<p>Your answers suggest significant delays in multiple areas. This can feel overwhelming, but immediate, intensive support can make a profound difference.</p>
                          <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Immediate Action:</strong> We strongly recommend booking a full diagnostic evaluation with our clinical team or your pediatrician right away.</li>
                            <li><strong>Services:</strong> A comprehensive plan involving multiple therapies (Speech, Occupational, Physical) is likely needed.</li>
                            <li><strong>Support:</strong> Our 24x7 help service and parent coaching programs are designed to give you the support you need.</li>
                          </ul>`
            },
            "Moderate": {
                title: "Suggestion: Moderate GDD",
                details: `<p>Your answers indicate noticeable delays in some key developmental areas. This is a common time to seek support, and intervention is highly effective.</p>
                          <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Next Step:</strong> A professional consultation is the best next step to confirm these findings and create a targeted plan.</li>
                            <li><strong>Services:</strong> Your child would likely benefit from one or two specific therapies (e.g., Speech Therapy or Occupational Therapy) and our play-based game curriculum.</li>
                            <li><strong>Support:</strong> We recommend joining our virtual webinars for parents to learn strategies you can use at home.</li>
                          </ul>`
            },
            "Mild": {
                title: "Suggestion: Mild GDD / Potential Delay",
                details: `<p>Your answers show your child is meeting many milestones but may be slightly behind in one or two areas. This is often manageable with early, targeted support.</p>
                          <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Next Step:</strong> We suggest a 'watch and wait' approach combined with at-home activities. Our developmental games are perfect for this.</li>
                            <li><strong>Services:</strong> A single consultation can give you peace of mind and a clear plan for activities to do at home.</li>
                            <li><strong>Support:</strong> Continue to monitor progress and consider a re-assessment in 3-6 months if you are still concerned.</li>
                          </ul>`
            }
        };

        // --- DOM Elements ---
        const ageGate = document.getElementById('age-gate');
        const questionnaire = document.getElementById('questionnaire');
        const results = document.getElementById('results');
        const ageButtons = document.querySelectorAll('.age-btn');
        const form = document.getElementById('assessment-form');
        const questionnaireTitle = document.getElementById('questionnaire-title');
        const submitBtn = document.getElementById('submit-btn');
        const backBtn = document.getElementById('back-btn');
        const retakeBtn = document.getElementById('retake-btn');
        const resultCategory = document.getElementById('result-category');
        const resultScoreEl = document.getElementById('result-score');
        const resultSuggestions = document.getElementById('result-suggestions');
        const contactLink = document.getElementById('contact-link');
        
        let currentAgeGroup = "";

        // --- Functions ---

        // Helper function to clear errors
        function clearErrors() {
            form.querySelectorAll('.p-4').forEach(el => {
                el.style.borderColor = ''; // Reset border
                el.classList.remove('border-red-500', 'border-2');
                const errorMsg = el.querySelector('.error-message');
                if (errorMsg) errorMsg.remove();
            });
        }

        function showQuestionnaire(age) {
            currentAgeGroup = age;
            questionnaireTitle.textContent = `Assessment for Age ${age} Years`;
            form.innerHTML = ""; // Clear previous questions
            clearErrors(); // Clear errors from previous attempts

            questions[age].forEach((q, index) => {
                const questionBlock = document.createElement('div');
                // Added border-gray-200 for consistent default border
                questionBlock.className = "p-4 border border-gray-200 rounded-lg";
                
                const questionText = document.createElement('p');
                questionText.className = "text-lg font-semibold text-gray-800";
                questionText.textContent = `${index + 1}. ${q.text}`;
                questionBlock.appendChild(questionText);

                const ratingsBlock = document.createElement('div');
                ratingsBlock.className = "flex flex-wrap justify-center sm:justify-start mt-4";
                
                ratings.forEach(r => {
                    const input = document.createElement('input');
                    input.type = "radio";
                    input.id = `${q.id}-${r.value}`;
                    input.name = q.id;
                    input.value = r.value;
                    input.className = "rating-radio";
                    // REMOVED: if (r.value === 3) input.checked = true;
                    // No default check anymore

                    const label = document.createElement('label');
                    label.htmlFor = `${q.id}-${r.value}`;
                    label.className = "rating-label";
                    label.textContent = r.text;

                    ratingsBlock.appendChild(input);
                    ratingsBlock.appendChild(label);
                });
                questionBlock.appendChild(ratingsBlock);
                form.appendChild(questionBlock);
            });

            ageGate.classList.add('hidden');
            results.classList.add('hidden');
            questionnaire.classList.remove('hidden');
        }

        function calculateResults(e) {
            e.preventDefault();
            clearErrors(); // Clear old errors
            
            const formData = new FormData(form);
            let totalScore = 0;
            
            const currentQuestions = questions[currentAgeGroup];
            let allAnswered = true;
            let firstUnansweredElement = null;

            for (const q of currentQuestions) {
                const value = formData.get(q.id);
                if (value) {
                    totalScore += parseInt(value);
                } else {
                    allAnswered = false;
                    // Find the visual element for the unanswered question
                    const questionElement = document.querySelector(`input[name="${q.id}"]`)?.closest('.p-4');
                    if (questionElement) {
                        if (!firstUnansweredElement) {
                            firstUnansweredElement = questionElement; // Save the first one to scroll to
                        }
                        questionElement.classList.add('border-red-500', 'border-2');
                        let errorMsg = questionElement.querySelector('.error-message');
                        if (!errorMsg) {
                            errorMsg = document.createElement('p');
                            errorMsg.className = 'error-message text-red-600 font-medium text-sm mt-2';
                            errorMsg.textContent = 'Please select an answer for this question.';
                            questionElement.appendChild(errorMsg);
                        }
                    }
                }
            }

            if (!allAnswered) {
                if (firstUnansweredElement) {
                    firstUnansweredElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return; // Stop calculation
            }
            
            // If all answered, proceed to categorization
            const maxScore = currentQuestions.length * 5;
            let category = "";
            
            // Logic: Extreme <= 40%, Moderate <= 72%, Mild > 72%
            // 5 questions: Extreme <= 10, Moderate <= 18, Mild > 18
            const extremeThreshold = maxScore * 0.4; // 10
            const moderateThreshold = maxScore * 0.72; // 18

            if (totalScore <= extremeThreshold) { 
                category = "Extreme";
            } else if (totalScore <= moderateThreshold) {
                category = "Moderate";
            } else {
                category = "Mild";
            }
            
            displayResults(category, totalScore, maxScore);
        }

        function displayResults(category, score, maxScore) {
            const result = resultsData[category];
            resultCategory.textContent = result.title;
            resultScoreEl.textContent = `Your score was ${score} out of a possible ${maxScore}.`;
            resultSuggestions.innerHTML = result.details;

            // In a real app, this link would go to the main site's contact page.
            // For this demo, it just acts as a placeholder.
            contactLink.href = "gdd-website.html#contact"; // Point back to main site
            contactLink.target = "_blank"; // Open in new tab

            questionnaire.classList.add('hidden');
            results.classList.remove('hidden');
        }

        function resetAssessment() {
            results.classList.add('hidden');
            questionnaire.classList.add('hidden');
            ageGate.classList.remove('hidden');
            currentAgeGroup = "";
            form.innerHTML = "";
            clearErrors(); // Clear errors when resetting
        }

        // --- Event Listeners ---
        ageButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                showQuestionnaire(btn.dataset.age);
            });
        });

        submitBtn.addEventListener('click', calculateResults);
        backBtn.addEventListener('click', resetAssessment);
        retakeBtn.addEventListener('click', resetAssessment);
    </script>
</body>
</html>